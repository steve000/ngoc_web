<!-- 编辑商品属性 -->
<template>
    <div class="createInsteadDelivery">
        <div class="content">
            <div class="title">
                <div>基本信息</div>
            </div>
            <div class="content-wrapper">
                <el-form label-width="110px" :model="createInsteadDeliveryParams" ref="createInsteadDeliveryParams">
                    <div class="displayStyle">
                        <el-form-item label="产品名称：">
                            <el-input v-model="createInsteadDeliveryParams.productName" placeholder="请输入商品名称" v-on:input="inputProductNameFunc" disabled class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="spu编码：">
                            <el-input v-model="createInsteadDeliveryParams.productId" placeholder="" disabled class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性1：" >
                            <el-input v-model="createInsteadDeliveryParams.udp1" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性2：" >
                            <el-input v-model="createInsteadDeliveryParams.udp2" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性3：" >
                            <el-input v-model="createInsteadDeliveryParams.udp3" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性4：" >
                            <el-input v-model="createInsteadDeliveryParams.udp4" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性5：" >
                            <el-input v-model="createInsteadDeliveryParams.udp5" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性6：" >
                            <el-input v-model="createInsteadDeliveryParams.udp6" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性7：" >
                            <el-input v-model="createInsteadDeliveryParams.udp7" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性8：" >
                            <el-input v-model="createInsteadDeliveryParams.udp8" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性9：" >
                            <el-input v-model="createInsteadDeliveryParams.udp9" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性10：" >
                            <el-input v-model="createInsteadDeliveryParams.udp10" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性11：" >
                            <el-input v-model="createInsteadDeliveryParams.udp11" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性12：" >
                            <el-input v-model="createInsteadDeliveryParams.udp12" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性13：" >
                            <el-input v-model="createInsteadDeliveryParams.udp13" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性14：" >
                            <el-input v-model="createInsteadDeliveryParams.udp14" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性15：" >
                            <el-input v-model="createInsteadDeliveryParams.udp15" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性16：" >
                            <el-input v-model="createInsteadDeliveryParams.udp16" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性17：" >
                            <el-input v-model="createInsteadDeliveryParams.udp17" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性18：" >
                            <el-input v-model="createInsteadDeliveryParams.udp18" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性19：" >
                            <el-input v-model="createInsteadDeliveryParams.udp19" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                    <div class="displayStyle">
                        <el-form-item label="属性20：" >
                            <el-input v-model="createInsteadDeliveryParams.udp20" placeholder="" class="rowUI" size="small">
                            </el-input>
                        </el-form-item>
                    </div>
                </el-form>
            </div>
        </div>
        <div class="content">
            <div class="pl20 pb20" :ref="createOrderRules">
                <el-button type="primary" style="width:90px;" prop="channelId" @click="submitCreateOrder">提交</el-button>
                <el-button plain style="width:90px;" @click="quit(routesMapping.insteadDelivery, true)">取消</el-button>
            </div>
        </div>
    </div>
</template>
<script>
import PlatformMixins from '~/mixins/platform';
import QuitMixins from '~/mixins/quit';
import { routesMapping } from '~/router';
import { mapActions } from 'vuex';
export default {
    name: 'GoodsDigitalAttrEdit',
    mixins: [PlatformMixins, QuitMixins],
    data() {
        return {
            // 商品名称loading
            queryGoodsNameLoading: false,
            // 输入商品的list
            productList: [],
            // 编辑商品属性参数对象
            createInsteadDeliveryParams: {},
            //创建提交信息
            createOrderRules: {
                channelId: [
                    { required: true, message: '请输入商品名称', trigger: 'change' }
                ]
            },
            // 模糊查询商品名称
            queryGoodsName: '',
        }
    },
    mounted() {
        this.createInsteadDeliveryParams = JSON.parse(sessionStorage.getItem("digitalAttrEditData"));
        console.log(this.createInsteadDeliveryParams)
        sessionStorage.removeItem("digitalAttrEditData");
    },
    methods: {
        ...mapActions(["querySpuCodeByProductName", "goodsDigitalAttrEdit"]),
        // 根据商品名称查询到spu
        inputProductNameFunc() {
            console.log(this.searchKey)
            this.querySpuCodeByProductName({ productName: this.searchKey }).then((res) => {
                this.productList = res.result
                if (res.result.length > 0) {
                    this.createInsteadDeliveryParams.productId = this.productList[0].productId
                } else {
                    this.$message({
                        type: 'warning',
                        message: `根据名称查询spu失败`
                    })
                }
            })

        },
        // 提交编辑商品属性
        submitCreateOrder() {
            this.goodsDigitalAttrEdit({ 
                id: this.createInsteadDeliveryParams.id, 
                udp1: this.createInsteadDeliveryParams.udp1, 
                udp2: this.createInsteadDeliveryParams.udp2,
                udp3: this.createInsteadDeliveryParams.udp3,
                udp4: this.createInsteadDeliveryParams.udp4,
                udp5: this.createInsteadDeliveryParams.udp5,
                udp6: this.createInsteadDeliveryParams.udp6,
                udp7: this.createInsteadDeliveryParams.udp7,
                udp8: this.createInsteadDeliveryParams.udp8, 
                udp9: this.createInsteadDeliveryParams.udp9, 
                udp10: this.createInsteadDeliveryParams.udp10,
                udp11: this.createInsteadDeliveryParams.udp11, 
                udp12: this.createInsteadDeliveryParams.udp12,
                udp13: this.createInsteadDeliveryParams.udp13,
                udp14: this.createInsteadDeliveryParams.udp14,
                udp15: this.createInsteadDeliveryParams.udp15,
                udp16: this.createInsteadDeliveryParams.udp16,
                udp17: this.createInsteadDeliveryParams.udp17,
                udp18: this.createInsteadDeliveryParams.udp18, 
                udp19: this.createInsteadDeliveryParams.udp19, 
                udp20: this.createInsteadDeliveryParams.udp20, 
            }).then((res) => {
                console.log(res)
                if (res) {
                    this.$message({
                        type: 'success',
                        message: `编辑商品属性成功`
                    })
                    this.quit(this.routesMapping.GoodsDigitalAttrManage, true)
                } else {
                    this.$message({
                        type: 'warning',
                        message: `编辑商品属性失败`
                    })
                }
            })
        },
    },
    computed: {
        columnTotal() {
            if (this.commodityInformationList.length) {
                return this.commodityInformationList.map((row) => row.saleTotal || 0).reduce((x, y) => (x + y))
            }
        }
    },

}
</script>

<style lang="scss" scoped>
.createInsteadDelivery {
    height: 100%;
    padding: 20px;
    .content {
        background-color: #fff;
        .title {
            font-size: 14px;
            color: #333333;
            line-height: 44px;
            height: 44px;
            background-color: #fff;
            border-bottom: 1px solid #E5E5E5;
        }
        .content-wrapper {
            padding: 20px 20px 1px 20px;
            .displayStyle,
            .displayStyle1 {
                display: inline-block;
                width: 45%;
                padding-left: 25px;
                .row_width {
                    width: 300px;
                    height: 36px;
                }
            }
        }
        .addProduct {
            margin-bottom: 20px;
        }
        table thead th {
            background: #F6F7FB;
            width: 100px;
            height: 44px;
        }
        table {
            border: 1px solid #eee;
            border-collapse: collapse;
            margin: 0 auto;
            text-align: left;
            font-size: 12px;
            tr {
                border-bottom: 1px solid #eee;
                background: #FFFFFF;
                height: 44px;
                overflow: hidden;
                box-shadow: 0 1px 0 0 #F2F6FD;
                border: 1px solid #f0f3fa;
                transition: 1s;
                .iconfont1 {
                    width: 16px;
                    height: 16px;
                    top: -6px;
                    right: -1px;
                    position: absolute;
                    display: none;
                    background-color: white;
                    color: red;
                    transition: 1s;
                }
                &:hover {
                    //    border: 1px dashed #539EFF;
                    outline: 1px dashed #539eff;
                    outline-offset: 0px;
                    transition: 1s;
                    .iconfont1 {
                        display: block;
                        cursor: pointer;
                        transition: 1s;
                    }
                }
                td {
                    padding-left: 5px;
                    .table-input {
                        width: 120px;
                    }
                }
            }
        }
    }
    .orderContainer {
        margin: 20px;
        background-color: #fbfbfb;
        border: 1px solid #f1f1f1;
        text-align: right;
        font-size: 14px;
        color: #333333;
        .orderCount {
            height: 50px;
            line-height: 50px;
            margin-right: 15px;
            span {
                color: red;
                font-size: 18px;
            }
        }
    }
    .submitBtn {
        clear: both;
        padding: 20px;
        background-color: white;
    }
    .el-table__body-wrapper {
        overflow: inherit;
    }
    .createAddress_func {
        margin: 0 10px;
        padding: 3px;
        width: 58px;
        height: 20px;
        cursor: pointer;
        &.defalut_address {
            background-color: #FFEDDD;
            color: #FF9624;
            border: 1px solid #FF9624;
        }
        &.set_defalutAddress {
            display: none;
            background-color: #FF9624;
            color: #fff;
            border: 1px solid #FF9624;
        }
    }
    .el-table__row:hover {
        .createAddress_func {
            &.set_defalutAddress {
                display: inline;
            }
        }
    }
    .inventory {
        background-color: #FA5555;
        color: #fff;
        font-size: 12px;
        width: 58px;
        height: 20px;
        line-height: 20px;
        text-align: center;
    }
}
</style>
